<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Mapping with ggplot2 | Intro R Workshop: Data Manipulation, Analysis, and Visualisation</title>
  <meta name="description" content="The basics for a safe voyage through the tidyverse." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Mapping with ggplot2 | Intro R Workshop: Data Manipulation, Analysis, and Visualisation" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="figures/769_life_finds_a_way.png" />
  <meta property="og:description" content="The basics for a safe voyage through the tidyverse." />
  <meta name="github-repo" content="ajsmit/Intro_R_Workshop" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Mapping with ggplot2 | Intro R Workshop: Data Manipulation, Analysis, and Visualisation" />
  
  <meta name="twitter:description" content="The basics for a safe voyage through the tidyverse." />
  <meta name="twitter:image" content="figures/769_life_finds_a_way.png" />

<meta name="author" content="AJ Smit, Amieroh Abrahams &amp; Robert W Schlegel" />


<meta name="date" content="2021-03-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="brewing.html"/>
<link rel="next" href="mapping-style.html"/>
<script src="docs/header-attrs-2.7/header-attrs.js"></script>
<script src="docs/jquery-2.2.3/jquery.min.js"></script>
<link href="docs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="docs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="docs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="docs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="docs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="docs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="docs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Intro R Workshop</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="prelim.html"><a href="prelim.html"><i class="fa fa-check"></i><b>1</b> Preliminaries</a>
<ul>
<li class="chapter" data-level="1.1" data-path="prelim.html"><a href="prelim.html#venue-date-and-time"><i class="fa fa-check"></i><b>1.1</b> Venue, date and time</a></li>
<li class="chapter" data-level="1.2" data-path="prelim.html"><a href="prelim.html#course-outline"><i class="fa fa-check"></i><b>1.2</b> Course outline</a>
<ul>
<li class="chapter" data-level="" data-path="prelim.html"><a href="prelim.html#day-1-in-the-beginning"><i class="fa fa-check"></i>Day 1 – In the Beginning</a></li>
<li class="chapter" data-level="" data-path="prelim.html"><a href="prelim.html#day-2-show-and-tell"><i class="fa fa-check"></i>Day 2 – Show and tell</a></li>
<li class="chapter" data-level="" data-path="prelim.html"><a href="prelim.html#day-3-going-deeper"><i class="fa fa-check"></i>Day 3 – Going deeper</a></li>
<li class="chapter" data-level="" data-path="prelim.html"><a href="prelim.html#day-4-the-enlightened-researcher"><i class="fa fa-check"></i>Day 4 – The Enlightened Researcher</a></li>
<li class="chapter" data-level="" data-path="prelim.html"><a href="prelim.html#day-5-the-world-is-yours"><i class="fa fa-check"></i>Day 5 – The world is yours</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="prelim.html"><a href="prelim.html#about-this-workshop"><i class="fa fa-check"></i><b>1.3</b> About this Workshop</a></li>
<li class="chapter" data-level="1.4" data-path="prelim.html"><a href="prelim.html#why-use-r"><i class="fa fa-check"></i><b>1.4</b> Why use R?</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="prelim.html"><a href="prelim.html#some-negatives-of-using-r"><i class="fa fa-check"></i><b>1.4.1</b> Some negatives of using R</a></li>
<li class="chapter" data-level="1.4.2" data-path="prelim.html"><a href="prelim.html#the-challenge-learning-to-program-in-r"><i class="fa fa-check"></i><b>1.4.2</b> The challenge: learning to program in R</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="prelim.html"><a href="prelim.html#using-your-own-computer"><i class="fa fa-check"></i><b>1.5</b> Using your own computer?</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="prelim.html"><a href="prelim.html#installing-r"><i class="fa fa-check"></i><b>1.5.1</b> Installing R</a></li>
<li class="chapter" data-level="1.5.2" data-path="prelim.html"><a href="prelim.html#installing-rstudio"><i class="fa fa-check"></i><b>1.5.2</b> Installing RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="prelim.html"><a href="prelim.html#resources"><i class="fa fa-check"></i><b>1.6</b> Resources</a></li>
<li class="chapter" data-level="1.7" data-path="prelim.html"><a href="prelim.html#style-and-code-conventions"><i class="fa fa-check"></i><b>1.7</b> Style and code conventions</a></li>
<li class="chapter" data-level="1.8" data-path="prelim.html"><a href="prelim.html#about-this-document"><i class="fa fa-check"></i><b>1.8</b> About this document</a></li>
<li class="chapter" data-level="1.9" data-path="prelim.html"><a href="prelim.html#exercise-it-which-shall-not-be-named"><i class="fa fa-check"></i><b>1.9</b> Exercise: It which shall not be named</a></li>
<li class="chapter" data-level="1.10" data-path="prelim.html"><a href="prelim.html#session-info"><i class="fa fa-check"></i><b>1.10</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i><b>2</b> RStudio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="rstudio.html"><a href="rstudio.html#setting-up-the-workspace"><i class="fa fa-check"></i><b>2.1</b> Setting up the workspace</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="rstudio.html"><a href="rstudio.html#general-settings"><i class="fa fa-check"></i><b>2.1.1</b> General settings</a></li>
<li class="chapter" data-level="2.1.2" data-path="rstudio.html"><a href="rstudio.html#customising-appearance"><i class="fa fa-check"></i><b>2.1.2</b> Customising appearance</a></li>
<li class="chapter" data-level="2.1.3" data-path="rstudio.html"><a href="rstudio.html#configuring-panes"><i class="fa fa-check"></i><b>2.1.3</b> Configuring panes</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="rstudio.html"><a href="rstudio.html#the-rproject"><i class="fa fa-check"></i><b>2.2</b> The Rproject</a></li>
<li class="chapter" data-level="2.3" data-path="rstudio.html"><a href="rstudio.html#installing-packages"><i class="fa fa-check"></i><b>2.3</b> Installing packages</a></li>
<li class="chapter" data-level="2.4" data-path="rstudio.html"><a href="rstudio.html#the-panes-of-rstudio"><i class="fa fa-check"></i><b>2.4</b> The panes of RStudio</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="rstudio.html"><a href="rstudio.html#source-editor"><i class="fa fa-check"></i><b>2.4.1</b> Source Editor</a></li>
<li class="chapter" data-level="2.4.2" data-path="rstudio.html"><a href="rstudio.html#console"><i class="fa fa-check"></i><b>2.4.2</b> Console</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="rstudio.html"><a href="rstudio.html#exercise"><i class="fa fa-check"></i><b>2.5</b> Exercise</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="rstudio.html"><a href="rstudio.html#environment-and-history-panes"><i class="fa fa-check"></i><b>2.5.1</b> Environment and History panes</a></li>
<li class="chapter" data-level="2.5.2" data-path="rstudio.html"><a href="rstudio.html#files-plots-packages-help-and-viewer-panes"><i class="fa fa-check"></i><b>2.5.2</b> Files, Plots, Packages, Help, and Viewer panes</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="rstudio.html"><a href="rstudio.html#session-info-1"><i class="fa fa-check"></i><b>2.6</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>3</b> GitHub</a>
<ul>
<li class="chapter" data-level="3.1" data-path="github.html"><a href="github.html#what-is-github"><i class="fa fa-check"></i><b>3.1</b> What is GitHub?</a></li>
<li class="chapter" data-level="3.2" data-path="github.html"><a href="github.html#installing-git-on-windows"><i class="fa fa-check"></i><b>3.2</b> Installing Git on Windows</a></li>
<li class="chapter" data-level="3.3" data-path="github.html"><a href="github.html#create-and-account-and-a-repository"><i class="fa fa-check"></i><b>3.3</b> Create and account and a repository</a></li>
<li class="chapter" data-level="3.4" data-path="github.html"><a href="github.html#git-configuring-activation-and-connecting-to-a-remote-repository"><i class="fa fa-check"></i><b>3.4</b> Git configuring (activation) and connecting to a remote repository</a></li>
<li class="chapter" data-level="3.5" data-path="github.html"><a href="github.html#clone-the-new-github-repository-to-your-computer-via-rstudio."><i class="fa fa-check"></i><b>3.5</b> Clone the new GitHub repository to your computer via RStudio.</a></li>
<li class="chapter" data-level="3.6" data-path="github.html"><a href="github.html#commits"><i class="fa fa-check"></i><b>3.6</b> Commits</a></li>
<li class="chapter" data-level="3.7" data-path="github.html"><a href="github.html#open-a-pull-request"><i class="fa fa-check"></i><b>3.7</b> Open a Pull Request</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>4</b> An R workflow</a>
<ul>
<li class="chapter" data-level="4.1" data-path="workflow.html"><a href="workflow.html#r-scripts"><i class="fa fa-check"></i><b>4.1</b> R Scripts</a></li>
<li class="chapter" data-level="4.2" data-path="workflow.html"><a href="workflow.html#reading-data-into-r"><i class="fa fa-check"></i><b>4.2</b> Reading data into R</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="workflow.html"><a href="workflow.html#preparing-data-for-r"><i class="fa fa-check"></i><b>4.2.1</b> Preparing data for R</a></li>
<li class="chapter" data-level="4.2.2" data-path="workflow.html"><a href="workflow.html#converting-data"><i class="fa fa-check"></i><b>4.2.2</b> Converting data</a></li>
<li class="chapter" data-level="4.2.3" data-path="workflow.html"><a href="workflow.html#importing-data"><i class="fa fa-check"></i><b>4.2.3</b> Importing data</a></li>
<li class="chapter" data-level="4.2.4" data-path="workflow.html"><a href="workflow.html#loading-a-file"><i class="fa fa-check"></i><b>4.2.4</b> Loading a file</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="workflow.html"><a href="workflow.html#working-with-data"><i class="fa fa-check"></i><b>4.3</b> Working with data</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="workflow.html"><a href="workflow.html#examine-your-data"><i class="fa fa-check"></i><b>4.3.1</b> Examine your data</a></li>
<li class="chapter" data-level="4.3.2" data-path="workflow.html"><a href="workflow.html#tidyverse-sneak-peek"><i class="fa fa-check"></i><b>4.3.2</b> Tidyverse sneak peek</a></li>
<li class="chapter" data-level="4.3.3" data-path="workflow.html"><a href="workflow.html#subsetting"><i class="fa fa-check"></i><b>4.3.3</b> Subsetting</a></li>
<li class="chapter" data-level="4.3.4" data-path="workflow.html"><a href="workflow.html#basic-stats"><i class="fa fa-check"></i><b>4.3.4</b> Basic stats</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="workflow.html"><a href="workflow.html#exercise-1"><i class="fa fa-check"></i><b>4.4</b> Exercise</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="workflow.html"><a href="workflow.html#summary-of-all-variables-in-a-dataframe"><i class="fa fa-check"></i><b>4.4.1</b> Summary of all variables in a dataframe</a></li>
<li class="chapter" data-level="4.4.2" data-path="workflow.html"><a href="workflow.html#summary-statistics-by-variable"><i class="fa fa-check"></i><b>4.4.2</b> Summary statistics by variable</a></li>
<li class="chapter" data-level="4.4.3" data-path="workflow.html"><a href="workflow.html#more-complex-calculations"><i class="fa fa-check"></i><b>4.4.3</b> More complex calculations</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="workflow.html"><a href="workflow.html#exercise-2"><i class="fa fa-check"></i><b>4.5</b> Exercise</a></li>
<li class="chapter" data-level="4.6" data-path="workflow.html"><a href="workflow.html#saving-data"><i class="fa fa-check"></i><b>4.6</b> Saving data</a></li>
<li class="chapter" data-level="4.7" data-path="workflow.html"><a href="workflow.html#visualisations"><i class="fa fa-check"></i><b>4.7</b> Visualisations</a></li>
<li class="chapter" data-level="4.8" data-path="workflow.html"><a href="workflow.html#clearing-the-memory"><i class="fa fa-check"></i><b>4.8</b> Clearing the memory</a></li>
<li class="chapter" data-level="4.9" data-path="workflow.html"><a href="workflow.html#working-directories"><i class="fa fa-check"></i><b>4.9</b> Working directories</a></li>
<li class="chapter" data-level="4.10" data-path="workflow.html"><a href="workflow.html#help"><i class="fa fa-check"></i><b>4.10</b> Help</a></li>
<li class="chapter" data-level="4.11" data-path="workflow.html"><a href="workflow.html#session-info-2"><i class="fa fa-check"></i><b>4.11</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="graphics.html"><a href="graphics.html"><i class="fa fa-check"></i><b>5</b> Graphics with <strong><code>ggplot2</code></strong></a>
<ul>
<li class="chapter" data-level="5.1" data-path="graphics.html"><a href="graphics.html#example-figures"><i class="fa fa-check"></i><b>5.1</b> Example figures</a></li>
<li class="chapter" data-level="5.2" data-path="graphics.html"><a href="graphics.html#basics-of-ggplot2"><i class="fa fa-check"></i><b>5.2</b> Basics of <strong><code>ggplot2</code></strong></a></li>
<li class="chapter" data-level="5.3" data-path="graphics.html"><a href="graphics.html#to-aes-or-not-to-aes-that-is-the-question"><i class="fa fa-check"></i><b>5.3</b> To <code>aes()</code> or not to <code>aes()</code>, that is the question</a></li>
<li class="chapter" data-level="5.4" data-path="graphics.html"><a href="graphics.html#changing-labels"><i class="fa fa-check"></i><b>5.4</b> Changing labels</a></li>
<li class="chapter" data-level="5.5" data-path="graphics.html"><a href="graphics.html#exercise-3"><i class="fa fa-check"></i><b>5.5</b> Exercise</a></li>
<li class="chapter" data-level="5.6" data-path="graphics.html"><a href="graphics.html#session-info-3"><i class="fa fa-check"></i><b>5.6</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="faceting.html"><a href="faceting.html"><i class="fa fa-check"></i><b>6</b> Faceting Figures</a>
<ul>
<li class="chapter" data-level="6.1" data-path="faceting.html"><a href="faceting.html#faceting-one-figure"><i class="fa fa-check"></i><b>6.1</b> Faceting one figure</a></li>
<li class="chapter" data-level="6.2" data-path="faceting.html"><a href="faceting.html#new-figure-types"><i class="fa fa-check"></i><b>6.2</b> New figure types</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="faceting.html"><a href="faceting.html#line-graph"><i class="fa fa-check"></i><b>6.2.1</b> Line graph</a></li>
<li class="chapter" data-level="6.2.2" data-path="faceting.html"><a href="faceting.html#linear-model"><i class="fa fa-check"></i><b>6.2.2</b> Linear model</a></li>
<li class="chapter" data-level="6.2.3" data-path="faceting.html"><a href="faceting.html#histogram"><i class="fa fa-check"></i><b>6.2.3</b> Histogram</a></li>
<li class="chapter" data-level="6.2.4" data-path="faceting.html"><a href="faceting.html#boxplot"><i class="fa fa-check"></i><b>6.2.4</b> Boxplot</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="faceting.html"><a href="faceting.html#gridding-figures"><i class="fa fa-check"></i><b>6.3</b> Gridding figures</a></li>
<li class="chapter" data-level="6.4" data-path="faceting.html"><a href="faceting.html#session-info-4"><i class="fa fa-check"></i><b>6.4</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="brewing.html"><a href="brewing.html"><i class="fa fa-check"></i><b>7</b> Brewing colours in <strong><code>ggplot2</code></strong></a>
<ul>
<li class="chapter" data-level="7.1" data-path="brewing.html"><a href="brewing.html#r-data"><i class="fa fa-check"></i><b>7.1</b> R Data</a></li>
<li class="chapter" data-level="7.2" data-path="brewing.html"><a href="brewing.html#rcolorbrewer"><i class="fa fa-check"></i><b>7.2</b> <strong><code>RColorBrewer</code></strong></a></li>
<li class="chapter" data-level="7.3" data-path="brewing.html"><a href="brewing.html#make-your-own-palettes"><i class="fa fa-check"></i><b>7.3</b> Make your own palettes</a></li>
<li class="chapter" data-level="7.4" data-path="brewing.html"><a href="brewing.html#use-your-own-palettes"><i class="fa fa-check"></i><b>7.4</b> Use your own palettes</a></li>
<li class="chapter" data-level="7.5" data-path="brewing.html"><a href="brewing.html#diy-figures"><i class="fa fa-check"></i><b>7.5</b> DIY figures</a></li>
<li class="chapter" data-level="7.6" data-path="brewing.html"><a href="brewing.html#session-info-5"><i class="fa fa-check"></i><b>7.6</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="mapping.html"><a href="mapping.html"><i class="fa fa-check"></i><b>8</b> Mapping with <strong><code>ggplot2</code></strong></a>
<ul>
<li class="chapter" data-level="8.1" data-path="mapping.html"><a href="mapping.html#a-new-concept"><i class="fa fa-check"></i><b>8.1</b> A new concept?</a></li>
<li class="chapter" data-level="8.2" data-path="mapping.html"><a href="mapping.html#land-mask"><i class="fa fa-check"></i><b>8.2</b> Land mask</a></li>
<li class="chapter" data-level="8.3" data-path="mapping.html"><a href="mapping.html#borders"><i class="fa fa-check"></i><b>8.3</b> Borders</a></li>
<li class="chapter" data-level="8.4" data-path="mapping.html"><a href="mapping.html#force-lonlat-extent"><i class="fa fa-check"></i><b>8.4</b> Force lon/lat extent</a></li>
<li class="chapter" data-level="8.5" data-path="mapping.html"><a href="mapping.html#ocean-temperature"><i class="fa fa-check"></i><b>8.5</b> Ocean temperature</a></li>
<li class="chapter" data-level="8.6" data-path="mapping.html"><a href="mapping.html#final-touches"><i class="fa fa-check"></i><b>8.6</b> Final touches</a></li>
<li class="chapter" data-level="8.7" data-path="mapping.html"><a href="mapping.html#session-info-6"><i class="fa fa-check"></i><b>8.7</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mapping-style.html"><a href="mapping-style.html"><i class="fa fa-check"></i><b>9</b> Mapping with style</a>
<ul>
<li class="chapter" data-level="9.1" data-path="mapping-style.html"><a href="mapping-style.html#default-maps"><i class="fa fa-check"></i><b>9.1</b> Default maps</a></li>
<li class="chapter" data-level="9.2" data-path="mapping-style.html"><a href="mapping-style.html#specific-labels"><i class="fa fa-check"></i><b>9.2</b> Specific labels</a></li>
<li class="chapter" data-level="9.3" data-path="mapping-style.html"><a href="mapping-style.html#scale-bars"><i class="fa fa-check"></i><b>9.3</b> Scale bars</a></li>
<li class="chapter" data-level="9.4" data-path="mapping-style.html"><a href="mapping-style.html#session-inf"><i class="fa fa-check"></i><b>9.4</b> Session inf</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="mapping-google.html"><a href="mapping-google.html"><i class="fa fa-check"></i><b>10</b> Mapping with OpenStreetMap</a>
<ul>
<li class="chapter" data-level="10.1" data-path="mapping-google.html"><a href="mapping-google.html#openstreetmap"><i class="fa fa-check"></i><b>10.1</b> <strong><code>OpenStreetMap</code></strong></a></li>
<li class="chapter" data-level="10.2" data-path="mapping-google.html"><a href="mapping-google.html#mapping-cape-point"><i class="fa fa-check"></i><b>10.2</b> Mapping Cape Point</a></li>
<li class="chapter" data-level="10.3" data-path="mapping-google.html"><a href="mapping-google.html#site-labels"><i class="fa fa-check"></i><b>10.3</b> Site labels</a></li>
<li class="chapter" data-level="10.4" data-path="mapping-google.html"><a href="mapping-google.html#diy-maps"><i class="fa fa-check"></i><b>10.4</b> DIY maps</a></li>
<li class="chapter" data-level="10.5" data-path="mapping-google.html"><a href="mapping-google.html#session-info-7"><i class="fa fa-check"></i><b>10.5</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="tidy.html"><a href="tidy.html"><i class="fa fa-check"></i><b>11</b> Tidy data</a>
<ul>
<li class="chapter" data-level="11.1" data-path="tidy.html"><a href="tidy.html#gathering-and-spreading"><i class="fa fa-check"></i><b>11.1</b> Gathering and spreading</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="tidy.html"><a href="tidy.html#gathering"><i class="fa fa-check"></i><b>11.1.1</b> Gathering</a></li>
<li class="chapter" data-level="11.1.2" data-path="tidy.html"><a href="tidy.html#spreading"><i class="fa fa-check"></i><b>11.1.2</b> Spreading</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="tidy.html"><a href="tidy.html#separating-and-uniting"><i class="fa fa-check"></i><b>11.2</b> Separating and uniting</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="tidy.html"><a href="tidy.html#separate"><i class="fa fa-check"></i><b>11.2.1</b> Separate</a></li>
<li class="chapter" data-level="11.2.2" data-path="tidy.html"><a href="tidy.html#separating-dates-using-mutate"><i class="fa fa-check"></i><b>11.2.2</b> Separating dates using <code>mutate()</code></a></li>
<li class="chapter" data-level="11.2.3" data-path="tidy.html"><a href="tidy.html#unite"><i class="fa fa-check"></i><b>11.2.3</b> Unite</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="tidy.html"><a href="tidy.html#joining"><i class="fa fa-check"></i><b>11.3</b> Joining</a></li>
<li class="chapter" data-level="11.4" data-path="tidy.html"><a href="tidy.html#but-why-though"><i class="fa fa-check"></i><b>11.4</b> But why though?</a></li>
<li class="chapter" data-level="11.5" data-path="tidy.html"><a href="tidy.html#session-info-8"><i class="fa fa-check"></i><b>11.5</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tidier.html"><a href="tidier.html"><i class="fa fa-check"></i><b>12</b> Tidier data</a>
<ul>
<li class="chapter" data-level="12.1" data-path="tidier.html"><a href="tidier.html#comparison-operators"><i class="fa fa-check"></i><b>12.1</b> Comparison operators</a></li>
<li class="chapter" data-level="12.2" data-path="tidier.html"><a href="tidier.html#logical-operators"><i class="fa fa-check"></i><b>12.2</b> Logical operators</a></li>
<li class="chapter" data-level="12.3" data-path="tidier.html"><a href="tidier.html#arrange-observations-rows-with-arrange"><i class="fa fa-check"></i><b>12.3</b> Arrange observations (rows) with <code>arrange()</code></a></li>
<li class="chapter" data-level="12.4" data-path="tidier.html"><a href="tidier.html#filter-observations-rows-with-filter"><i class="fa fa-check"></i><b>12.4</b> Filter observations (rows) with <code>filter()</code></a></li>
<li class="chapter" data-level="12.5" data-path="tidier.html"><a href="tidier.html#select-variables-columns-withselect"><i class="fa fa-check"></i><b>12.5</b> Select variables (columns) with<code>select()</code></a></li>
<li class="chapter" data-level="12.6" data-path="tidier.html"><a href="tidier.html#create-new-variables-columns-with-mutate"><i class="fa fa-check"></i><b>12.6</b> Create new variables (columns) with <code>mutate()</code></a></li>
<li class="chapter" data-level="12.7" data-path="tidier.html"><a href="tidier.html#summarise-variables-columns-with-summarise"><i class="fa fa-check"></i><b>12.7</b> Summarise variables (columns) with <code>summarise()</code></a></li>
<li class="chapter" data-level="12.8" data-path="tidier.html"><a href="tidier.html#session-info-9"><i class="fa fa-check"></i><b>12.8</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="tidiest.html"><a href="tidiest.html"><i class="fa fa-check"></i><b>13</b> Tidiest data</a>
<ul>
<li class="chapter" data-level="13.1" data-path="tidiest.html"><a href="tidiest.html#group-observations-rows-by-variables-columns-with-group_by"><i class="fa fa-check"></i><b>13.1</b> Group observations (rows) by variables (columns) with <code>group_by()</code></a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="tidiest.html"><a href="tidiest.html#grouping-by-multiple-variables"><i class="fa fa-check"></i><b>13.1.1</b> Grouping by multiple variables</a></li>
<li class="chapter" data-level="13.1.2" data-path="tidiest.html"><a href="tidiest.html#ungrouping"><i class="fa fa-check"></i><b>13.1.2</b> Ungrouping</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="tidiest.html"><a href="tidiest.html#chain-functions-with-the-pipe"><i class="fa fa-check"></i><b>13.2</b> Chain functions with the pipe (<code>%&gt;%</code>)</a></li>
<li class="chapter" data-level="13.3" data-path="tidiest.html"><a href="tidiest.html#group-all-the-functions"><i class="fa fa-check"></i><b>13.3</b> Group all the functions!</a></li>
<li class="chapter" data-level="13.4" data-path="tidiest.html"><a href="tidiest.html#going-deeper"><i class="fa fa-check"></i><b>13.4</b> Going deeper</a></li>
<li class="chapter" data-level="13.5" data-path="tidiest.html"><a href="tidiest.html#pipe-into-ggplot2"><i class="fa fa-check"></i><b>13.5</b> Pipe into <strong><code>ggplot2</code></strong></a></li>
<li class="chapter" data-level="13.6" data-path="tidiest.html"><a href="tidiest.html#additional-useful-functions"><i class="fa fa-check"></i><b>13.6</b> Additional useful functions</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="tidiest.html"><a href="tidiest.html#rename-variables-columns-with-rename"><i class="fa fa-check"></i><b>13.6.1</b> Rename variables (columns) with <code>rename()</code></a></li>
<li class="chapter" data-level="13.6.2" data-path="tidiest.html"><a href="tidiest.html#create-a-new-dataframe-for-a-newly-created-variable-column-with-transmute"><i class="fa fa-check"></i><b>13.6.2</b> Create a new dataframe for a newly created variable (column) with <code>transmute()</code></a></li>
<li class="chapter" data-level="13.6.3" data-path="tidiest.html"><a href="tidiest.html#count-observations-rows-with-n"><i class="fa fa-check"></i><b>13.6.3</b> Count observations (rows) with <code>n()</code></a></li>
<li class="chapter" data-level="13.6.4" data-path="tidiest.html"><a href="tidiest.html#select-observations-rows-by-number-with-slice"><i class="fa fa-check"></i><b>13.6.4</b> Select observations (rows) by number with <code>slice()</code></a></li>
<li class="chapter" data-level="13.6.5" data-path="tidiest.html"><a href="tidiest.html#summary-functions"><i class="fa fa-check"></i><b>13.6.5</b> Summary functions</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="tidiest.html"><a href="tidiest.html#the-new-age-redux"><i class="fa fa-check"></i><b>13.7</b> The new age <em>redux</em></a></li>
<li class="chapter" data-level="13.8" data-path="tidiest.html"><a href="tidiest.html#session-info-10"><i class="fa fa-check"></i><b>13.8</b> Session info</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="recap.html"><a href="recap.html"><i class="fa fa-check"></i><b>14</b> Recap</a>
<ul>
<li class="chapter" data-level="14.1" data-path="recap.html"><a href="recap.html#the-future"><i class="fa fa-check"></i><b>14.1</b> The future</a></li>
<li class="chapter" data-level="14.2" data-path="recap.html"><a href="recap.html#today"><i class="fa fa-check"></i><b>14.2</b> Today</a></li>
<li class="chapter" data-level="14.3" data-path="recap.html"><a href="recap.html#session-info-11"><i class="fa fa-check"></i><b>14.3</b> Session info</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Intro R Workshop: Data Manipulation, Analysis, and Visualisation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="mapping" class="section level1" number="8">
<h1><span class="header-section-number">Chapter 8</span> Mapping with <strong><code>ggplot2</code></strong></h1>
<blockquote>
<p>“There’s no map to human behaviour.”</p>
<p>— Bjork</p>
</blockquote>
<blockquote>
<p>“Here be dragons”</p>
<p>— Unknown</p>
</blockquote>
<p>Yesterday we learned how to create <strong><code>ggplot2</code></strong> figures, change their aesthetics, labels, colour palettes, and facet/arrange them. Now we are going to look at how to create maps.</p>
<p>Most of the work that we perform as environmental/biological scientists involves going out to a location and sampling information there. Sometimes only once, and sometimes over a period of time. All of these different sampling methods lend themselves to different types of figures. One of those, collection of data at different points, is best shown with maps. As we will see over the course of Day 3, creating maps in <strong><code>ggplot2</code></strong> is very straight forward and is extensively supported. For that reason we are going to have plenty of time to also learn how to do some more advanced things. Our goal in this chapter is to produce the figure below.</p>
<div class="figure" style="text-align: center"><span id="fig:map-goal"></span>
<img src="figures/map_complete.png" alt="The goal for today." width="100%" />
<p class="caption">
Figure 8.1: The goal for today.
</p>
</div>
<p>Before we begin let’s go ahead and load the packages we will need, as well as the several dataframes required to make the final product.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="mapping.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb94-2"><a href="mapping.html#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb94-3"><a href="mapping.html#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb94-4"><a href="mapping.html#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="mapping.html#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data</span></span>
<span id="cb94-6"><a href="mapping.html#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;data/south_africa_coast.Rdata&quot;</span>)</span>
<span id="cb94-7"><a href="mapping.html#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;data/sa_provinces.RData&quot;</span>)</span>
<span id="cb94-8"><a href="mapping.html#cb94-8" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;data/rast_annual.Rdata&quot;</span>)</span>
<span id="cb94-9"><a href="mapping.html#cb94-9" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;data/MUR.Rdata&quot;</span>)</span>
<span id="cb94-10"><a href="mapping.html#cb94-10" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;data/MUR_low_res.RData&quot;</span>)</span>
<span id="cb94-11"><a href="mapping.html#cb94-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-12"><a href="mapping.html#cb94-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Choose which SST product you would like to use</span></span>
<span id="cb94-13"><a href="mapping.html#cb94-13" aria-hidden="true" tabindex="-1"></a>sst <span class="ot">&lt;-</span> MUR_low_res</span>
<span id="cb94-14"><a href="mapping.html#cb94-14" aria-hidden="true" tabindex="-1"></a><span class="co"># OR</span></span>
<span id="cb94-15"><a href="mapping.html#cb94-15" aria-hidden="true" tabindex="-1"></a>sst <span class="ot">&lt;-</span> MUR</span>
<span id="cb94-16"><a href="mapping.html#cb94-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-17"><a href="mapping.html#cb94-17" aria-hidden="true" tabindex="-1"></a><span class="co"># The colour palette we will use for ocean temperature</span></span>
<span id="cb94-18"><a href="mapping.html#cb94-18" aria-hidden="true" tabindex="-1"></a>cols11 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;#004dcd&quot;</span>, <span class="st">&quot;#0068db&quot;</span>, <span class="st">&quot;#007ddb&quot;</span>, <span class="st">&quot;#008dcf&quot;</span>, <span class="st">&quot;#009bbc&quot;</span>,</span>
<span id="cb94-19"><a href="mapping.html#cb94-19" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;#00a7a9&quot;</span>, <span class="st">&quot;#1bb298&quot;</span>, <span class="st">&quot;#6cba8f&quot;</span>, <span class="st">&quot;#9ac290&quot;</span>, <span class="st">&quot;#bec99a&quot;</span>)</span></code></pre></div>
<div id="a-new-concept" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> A new concept?</h2>
<p>The idea of creating a map in R may be daunting to some, but remember that a basic map is nothing more than a simple figure with an x and y axis. We tend to think of maps as different from other scientific figures, whereas in reality they are created the exact same way. Let’s compare a dot plot of the chicken weight data against a dot plot of the coastline of South Africa.</p>
<p>Chicken dots:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="mapping.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ChickWeight, <span class="fu">aes</span>(<span class="at">x =</span> Time, <span class="at">y =</span> weight)) <span class="sc">+</span></span>
<span id="cb95-2"><a href="mapping.html#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<div class="figure"><span id="fig:map-point-1"></span>
<img src="08-mapping_files/figure-html/map-point-1-1.png" alt="Dot plot of chicken weight data." width="672" />
<p class="caption">
Figure 8.2: Dot plot of chicken weight data.
</p>
</div>
<p>South African coast dots:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="mapping.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> south_africa_coast, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat)) <span class="sc">+</span></span>
<span id="cb96-2"><a href="mapping.html#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<div class="figure"><span id="fig:map-point-2"></span>
<img src="08-mapping_files/figure-html/map-point-2-1.png" alt="Dot plot off South African coast." width="672" />
<p class="caption">
Figure 8.3: Dot plot off South African coast.
</p>
</div>
<p>Does that look familiar? Notice how the x and y axis tick labels look the same as any map you would see in an atlas. This is because they are. But this isn’t a great way to create a map. Rather it is better to represent the land mass with a polygon. With <strong><code>ggplot2</code></strong> this is a simple task.</p>
</div>
<div id="land-mask" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Land mask</h2>
<p>Now that we have seen that a map is nothing more than a bunch of dots and shapes on specific points along the x and y axes we are going to look at the steps we would take to build a more complex map. Don’t worry if this seems daunting at first. We are going to take this step by step and ensure that each step is made clear along the way. The first step is to create a polygon. Note that we create an aesthetic argument inside of <code>geom_polygon()</code> and not <code>ggplot()</code> because some of the steps we will take later on will not accept the <code>group</code> aesthetic. Remember, whatever aesthetic arguments we put inside of <code>ggplot()</code> will be inserted for us into all of our other <code>geom_...()</code> lines of code.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="mapping.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> south_africa_coast, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat)) <span class="sc">+</span></span>
<span id="cb97-2"><a href="mapping.html#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;grey70&quot;</span>, <span class="fu">aes</span>(<span class="at">group =</span> group)) <span class="co"># The land mask</span></span></code></pre></div>
<div class="figure"><span id="fig:map-polygon"></span>
<img src="08-mapping_files/figure-html/map-polygon-1.png" alt="The map of South Africa. Now with province borders!" width="672" />
<p class="caption">
Figure 8.4: The map of South Africa. Now with province borders!
</p>
</div>
</div>
<div id="borders" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Borders</h2>
<p>The first thing we will add is the province borders as seen in Figure <a href="mapping.html#fig:map-goal">8.1</a>. Notice how we only add one more line of code to do this.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="mapping.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> south_africa_coast, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat)) <span class="sc">+</span></span>
<span id="cb98-2"><a href="mapping.html#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;grey70&quot;</span>, <span class="fu">aes</span>(<span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb98-3"><a href="mapping.html#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data =</span> sa_provinces, <span class="fu">aes</span>(<span class="at">group =</span> group)) <span class="co"># The province borders</span></span></code></pre></div>
<div class="figure"><span id="fig:map-province"></span>
<img src="08-mapping_files/figure-html/map-province-1.png" alt="The map of South Africa. Now with province borders!" width="672" />
<p class="caption">
Figure 8.5: The map of South Africa. Now with province borders!
</p>
</div>
</div>
<div id="force-lonlat-extent" class="section level2" number="8.4">
<h2><span class="header-section-number">8.4</span> Force lon/lat extent</h2>
<p>Unfortunately when we added our borders it increased the plotting area of our map past what we would like. To correct that we will need to explicitly state the borders we want.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="mapping.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> south_africa_coast, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat)) <span class="sc">+</span></span>
<span id="cb99-2"><a href="mapping.html#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;grey70&quot;</span>, <span class="fu">aes</span>(<span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb99-3"><a href="mapping.html#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data =</span> sa_provinces, <span class="fu">aes</span>(<span class="at">group =</span> group)) <span class="sc">+</span> </span>
<span id="cb99-4"><a href="mapping.html#cb99-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">34</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">36</span>, <span class="sc">-</span><span class="dv">26</span>), <span class="at">expand =</span> <span class="dv">0</span>) <span class="co"># Force lon/lat extent</span></span></code></pre></div>
<div class="figure"><span id="fig:map-expand"></span>
<img src="08-mapping_files/figure-html/map-expand-1.png" alt="The map, but with the extra bits snipped off." width="672" />
<p class="caption">
Figure 8.6: The map, but with the extra bits snipped off.
</p>
</div>
</div>
<div id="ocean-temperature" class="section level2" number="8.5">
<h2><span class="header-section-number">8.5</span> Ocean temperature</h2>
<p>This is starting to look pretty fancy, but it would be nicer if there was some colour involved. So let’s add the ocean temperature. Again, this will only require one more line of code. Starting to see a pattern? But what is different this time and why?</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="mapping.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> south_africa_coast, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat)) <span class="sc">+</span></span>
<span id="cb100-2"><a href="mapping.html#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> sst, <span class="fu">aes</span>(<span class="at">fill =</span> bins)) <span class="sc">+</span> <span class="co"># The ocean temperatures</span></span>
<span id="cb100-3"><a href="mapping.html#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;grey70&quot;</span>, <span class="fu">aes</span>(<span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb100-4"><a href="mapping.html#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data =</span> sa_provinces, <span class="fu">aes</span>(<span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb100-5"><a href="mapping.html#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">34</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">36</span>, <span class="sc">-</span><span class="dv">26</span>), <span class="at">expand =</span> <span class="dv">0</span>)</span></code></pre></div>
<div class="figure"><span id="fig:map-MUR"></span>
<img src="08-mapping_files/figure-html/map-MUR-1.png" alt="Ocean temperature (°C) visualised as an ice cream spill." width="672" />
<p class="caption">
Figure 8.7: Ocean temperature (°C) visualised as an ice cream spill.
</p>
</div>
<p>That looks… odd. Why do the colours look like someone melted a big bucket of ice cream in the ocean? This is because the colours you see in this figure are the default colours for discrete values in <strong><code>ggplot2</code></strong>. If we want to change them we may do so easily by adding yet one more line of code.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="mapping.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> south_africa_coast, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat)) <span class="sc">+</span></span>
<span id="cb101-2"><a href="mapping.html#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> sst, <span class="fu">aes</span>(<span class="at">fill =</span> bins)) <span class="sc">+</span></span>
<span id="cb101-3"><a href="mapping.html#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;grey70&quot;</span>, <span class="fu">aes</span>(<span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb101-4"><a href="mapping.html#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data =</span> sa_provinces, <span class="fu">aes</span>(<span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb101-5"><a href="mapping.html#cb101-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="st">&quot;Temp. (°C)&quot;</span>, <span class="at">values =</span> cols11) <span class="sc">+</span> <span class="co"># Set the colour palette</span></span>
<span id="cb101-6"><a href="mapping.html#cb101-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">34</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">36</span>, <span class="sc">-</span><span class="dv">26</span>), <span class="at">expand =</span> <span class="dv">0</span>)</span></code></pre></div>
<div class="figure"><span id="fig:map-colour"></span>
<img src="08-mapping_files/figure-html/map-colour-1.png" alt="Ocean temperatures (°C) around South Africa." width="672" />
<p class="caption">
Figure 8.8: Ocean temperatures (°C) around South Africa.
</p>
</div>
<p>There’s a colour palette that would make Jacques Cousteau swoon. When we set the colour palette for a figure in <strong><code>ggplot2</code></strong> we must use that colour palette for all other instances of those types of values, too. What this means is that any other discrete values that will be filled in, like the ocean colour above, must use the same colour palette (there are some technical exceptions to this rule that we will not cover in this course). We normally want <strong><code>ggplot2</code></strong> to use consistent colour palettes anyway, but it is important to note that this constraint exists. Let’s see what we mean. Next we will add the coastal pixels to our figure with one more line of code. We won’t change anything else. Note how <strong><code>ggplot2</code></strong> changes the colour of the coastal pixels to match the ocean colour automatically.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="mapping.html#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> south_africa_coast, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat)) <span class="sc">+</span></span>
<span id="cb102-2"><a href="mapping.html#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> sst, <span class="fu">aes</span>(<span class="at">fill =</span> bins)) <span class="sc">+</span></span>
<span id="cb102-3"><a href="mapping.html#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;grey70&quot;</span>, <span class="fu">aes</span>(<span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb102-4"><a href="mapping.html#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data =</span> sa_provinces, <span class="fu">aes</span>(<span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb102-5"><a href="mapping.html#cb102-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">data =</span> rast_annual, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat, <span class="at">fill =</span> bins), </span>
<span id="cb102-6"><a href="mapping.html#cb102-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">colour =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span> <span class="co"># The coastal temperature values</span></span>
<span id="cb102-7"><a href="mapping.html#cb102-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="st">&quot;Temp. (°C)&quot;</span>, <span class="at">values =</span> cols11) <span class="sc">+</span></span>
<span id="cb102-8"><a href="mapping.html#cb102-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">34</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">36</span>, <span class="sc">-</span><span class="dv">26</span>), <span class="at">expand =</span> <span class="dv">0</span>)</span></code></pre></div>
<div class="figure"><span id="fig:map-raster"></span>
<img src="08-mapping_files/figure-html/map-raster-1.png" alt="Map of South Africa showing *in situ* temeperatures (°C) as pixels along the coast." width="672" />
<p class="caption">
Figure 8.9: Map of South Africa showing <em>in situ</em> temeperatures (°C) as pixels along the coast.
</p>
</div>
</div>
<div id="final-touches" class="section level2" number="8.6">
<h2><span class="header-section-number">8.6</span> Final touches</h2>
<p>We used <code>geom_tile()</code> instead of <code>geom_rast()</code> to add the coastal pixels above so that we could add those little white boxes around them. This figure is looking pretty great now. And it only took a few rows of code to put it all together! The last step is to add several more lines of code that will control for all of the little things we want to change about the appearance of the figure. Each little thing that is changed below is annotated for your convenience.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="mapping.html#cb103-1" aria-hidden="true" tabindex="-1"></a>final_map <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> south_africa_coast, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat)) <span class="sc">+</span></span>
<span id="cb103-2"><a href="mapping.html#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> sst, <span class="fu">aes</span>(<span class="at">fill =</span> bins)) <span class="sc">+</span></span>
<span id="cb103-3"><a href="mapping.html#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;grey70&quot;</span>, <span class="fu">aes</span>(<span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb103-4"><a href="mapping.html#cb103-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">data =</span> sa_provinces, <span class="fu">aes</span>(<span class="at">group =</span> group)) <span class="sc">+</span></span>
<span id="cb103-5"><a href="mapping.html#cb103-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">data =</span> rast_annual, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat, <span class="at">fill =</span> bins), </span>
<span id="cb103-6"><a href="mapping.html#cb103-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">colour =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb103-7"><a href="mapping.html#cb103-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="st">&quot;Temp. (°C)&quot;</span>, <span class="at">values =</span> cols11) <span class="sc">+</span></span>
<span id="cb103-8"><a href="mapping.html#cb103-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_equal</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">34</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">36</span>, <span class="sc">-</span><span class="dv">26</span>), <span class="at">expand =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb103-9"><a href="mapping.html#cb103-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">position =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">+</span> <span class="co"># Put x axis labels on top of figure</span></span>
<span id="cb103-10"><a href="mapping.html#cb103-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_blank</span>(), <span class="co"># Remove the axis labels</span></span>
<span id="cb103-11"><a href="mapping.html#cb103-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>), <span class="co"># Change text size in legend</span></span>
<span id="cb103-12"><a href="mapping.html#cb103-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>), <span class="co"># Change legend title text size</span></span>
<span id="cb103-13"><a href="mapping.html#cb103-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.key.height =</span> <span class="fu">unit</span>(<span class="fl">0.3</span>, <span class="st">&quot;cm&quot;</span>), <span class="co"># Change size of legend</span></span>
<span id="cb103-14"><a href="mapping.html#cb103-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">&quot;white&quot;</span>), <span class="co"># Add legend background</span></span>
<span id="cb103-15"><a href="mapping.html#cb103-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">0</span>), <span class="co"># Change position of legend</span></span>
<span id="cb103-16"><a href="mapping.html#cb103-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.55</span>, <span class="fl">0.4</span>) <span class="co"># Fine tune position of legend</span></span>
<span id="cb103-17"><a href="mapping.html#cb103-17" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb103-18"><a href="mapping.html#cb103-18" aria-hidden="true" tabindex="-1"></a>final_map</span></code></pre></div>
<div class="figure"><span id="fig:map-final"></span>
<img src="08-mapping_files/figure-html/map-final-1.png" alt="The cleaned up map of South Africa. Resplendent with coastal and ocean temperatures (°C)." width="672" />
<p class="caption">
Figure 8.10: The cleaned up map of South Africa. Resplendent with coastal and ocean temperatures (°C).
</p>
</div>
<p>That is a very clean looking map so let’s go ahead and save it on our computers.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="mapping.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">plot =</span> final_map, <span class="st">&quot;figures/map_complete.pdf&quot;</span>, <span class="at">height =</span> <span class="dv">6</span>, <span class="at">width =</span> <span class="dv">9</span>)</span></code></pre></div>
</div>
<div id="session-info-6" class="section level2" number="8.7">
<h2><span class="header-section-number">8.7</span> Session info</h2>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="mapping.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">installed.packages</span>()[<span class="fu">names</span>(<span class="fu">sessionInfo</span>()<span class="sc">$</span>otherPkgs), <span class="st">&quot;Version&quot;</span>]</span></code></pre></div>
<pre><code>R&gt;    ggpubr   forcats   stringr     dplyr     purrr     readr     tidyr    tibble 
R&gt;   &quot;0.4.0&quot;   &quot;0.5.1&quot;   &quot;1.4.0&quot;   &quot;1.0.5&quot;   &quot;0.3.4&quot;   &quot;1.4.0&quot;   &quot;1.1.3&quot;   &quot;3.1.0&quot; 
R&gt;   ggplot2 tidyverse 
R&gt;   &quot;3.3.3&quot;   &quot;1.3.0&quot;</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="brewing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="mapping-style.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="docs/gitbook-2.6.7/js/app.min.js"></script>
<script src="docs/gitbook-2.6.7/js/lunr.js"></script>
<script src="docs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="docs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="docs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="docs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="docs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="docs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="docs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Intro_R_Workshop.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true,
"sharing": {
"facebook": true,
"twitter": true,
"google": true,
"download": "Intro_R_Workshop.pdf"
}
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
